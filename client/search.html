<!DOCTYPE html>
<html>
  <head></head>
  <title>Search Books</title>
  
  <body>
    <script type="text/javascript">
      console.log('Loaded')
      function submitSearch(){
        var author_Val = document.getElementById('author').value;
        var genre_Val = document.getElementById('genre').value;
        var book_title_Val = document.getElementById('book_title').value;
        var query = '?';
        if(author_Val) {
          query += '&author=' + author_Val
        }
        if(genre_Val) {
          query += '&genre=' + genre_Val
        }
        if(book_title_Val) {
          query += '&book_title=' + book_title_Val
        }
        // URL want to hit
        var url = 'http://localhost:3000/searchBooks' + query
        // Opening up new XMLHttpRequest
        var http = new XMLHttpRequest()
        // Making a POST request
        http.open('GET',url, true)
        // Setting up Request headers
        //http.setRequestHeader("Content-type","application/json")
        // Constructing POST data
        //data = '{"id": "abcd"}'
        // Sending the POST data
        //http.send(data)
        // On ready state
        http.onreadystatechange = function() {//Call a function when the state changes.
            // Checking the readystate is when the HEADERS are recieved
            if(http.readyState == 4) {
              if (http.status == 200) {
                // Alerting the particular header from the object
                alert(http.responseText);
              }
              console.log('status ', http.status);
            }
        };
        http.send();
      }
    </script>
    <form id="search_books_form">
      Author: <input id="author" type="text">
      Genre: <input id="genre" type="text">
      Book Title: <input id="book_title" type="text">
      <input id="submit_search" value="Submit" type="button" onclick="submitSearch()"/>
    </form>
    <div>
      <table id="search_result" border="true">
        <tr>
          <th>Author</th>
          <th>Genre</th>
          <th>Title</th>
          <th>Cover</th>
        </tr>
      </table>
    </div>
  </body>
</html>